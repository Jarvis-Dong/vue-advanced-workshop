<script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.11/vue.js"></script>

<div id="app"></div>

<script>
  function app({ el, model, view, actions }) {
    const wrappedActions = {}
    Object.keys(actions).forEach(key => {
      const ogAction = actions[key]
      wrappedActions[key] = () => {
        const nextModel = ogAction(vm.model)
        vm.model = nextModel
      }
    })
    // Implement this!
    const vm = new Vue({
      el: el,
      data: {
        model
      },
      //字符串模板的代替方案，允许你发挥 JavaScript 最大的编程能力。
      // 该渲染函数接收一个 createElement 方法作为第一个参数用来创建 VNode
      render(h) {
        return view(h, this.model,wrappedActions)
      }
    })
  }

  // voila
  app({
    el: '#app',
    model: {
      count: 0,
    },
    actions: {
      inc: ({ count }) => ({ count: count + 1 }),
      dec: ({ count }) => ({ count: count - 1 }),
    },
    view: (h, model, actions) =>
      h('div', [
        model.count,
        ' ',
        h('button', { on: { click: actions.inc } }, '+'),
        h('button', { on: { click: actions.dec } }, '-'),
      ]),
  })
</script>
